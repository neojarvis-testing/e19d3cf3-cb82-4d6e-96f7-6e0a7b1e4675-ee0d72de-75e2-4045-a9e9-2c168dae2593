<div *ngIf="isLoggedIn()">
    <app-usernav></app-usernav>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>My Feedback History</h1>
            <a routerLink="/useraddfeedback" class="add-btn">
                <i class="fas fa-plus"></i> Submit New Feedback
            </a>
        </div>

        <div *ngIf="viewfeedback && viewfeedback.length > 0" class="feedback-container">
            <div *ngFor="let feedback of viewfeedback" class="feedback-card">
                <div class="feedback-content">
                    <div class="feedback-date">
                        <i class="far fa-calendar-alt"></i>
                        {{ feedback.DateProvided | date: 'dd-MM-yyyy' }}
                    </div>
                    <p class="feedback-text">{{ feedback.Comments }}</p>
                </div>
                <div class="feedback-actions">
                    <button class="delete-btn" (click)="confirmDelete(feedback.FeedbackId)">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
        
        <div *ngIf="!viewfeedback || viewfeedback.length === 0" class="empty-state">
            <i class="far fa-comment-alt empty-icon"></i>
            <h3>No Feedback Submitted</h3>
            <p>You haven't provided any feedback yet. We value your opinion!</p>
            <a routerLink="/useraddfeedback" class="btn-primary">
                <i class="fas fa-plus"></i> Submit Feedback
            </a>
        </div>

        <!-- Delete Confirmation Modal -->
        <div *ngIf="delPopup" class="modal-overlay">
            <div class="modal-content">
                <h3>Confirm Delete</h3>
                <p>Are you sure you want to delete this feedback?</p>
                <div class="modal-actions">
                    <button class="btn-danger" (click)="deleteFeedback()">Delete</button>
                    <button class="btn-secondary" (click)="closeDel()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="!isLoggedIn()">
    <app-error></app-error>
</div>